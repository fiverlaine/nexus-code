<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nexus Code Generator</title>
    <meta name="description" content="Gerador de códigos seguros com design moderno" />
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚡</text></svg>" />
    
    <!-- Script 1: Criar _fbp cookie se não existir -->
    <script>
      (function () {
        function getCookie(name) {
          return document.cookie
            .split("; ")
            .find((row) => row.startsWith(name + "="))
            ?.split("=")[1];
        }
        function setFbpCookie() {
          if (!getCookie("_fbp")) {
            var fbp = "fb.1." + Date.now() + "." + Math.floor(Math.random() * 1e10);
            var expires = new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toUTCString();
            var domain = location.hostname.replace(/^www\./, "");
            document.cookie = "_fbp=" + fbp
              + "; path=/"
              + "; domain=" + domain
              + "; expires=" + expires
              + "; samesite=lax";
          }
        }
        setFbpCookie();
      })();
    </script>
    
    <!-- Meta Pixel Code -->
    <!-- IMPORTANTE: Mesmo Pixel ID do projeto insta1 para garantir match entre eventos -->
    <script>
      (function() {
        // Verificar se o pixel já está carregado (pode vir do parent em iframe)
        if (typeof window.fbq === 'function') {
          console.log('✅ Facebook Pixel já está carregado (provavelmente do parent)');
          // Se já estiver carregado, apenas rastrear PageView se necessário
          // O PageView já pode ter sido rastreado pelo parent
          return;
        }

        // Se não estiver carregado, inicializar o pixel
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        
        // Inicializar com o mesmo Pixel ID do projeto insta1
        fbq('init', '25009624982012198');
        
        // Rastrear PageView apenas se não estiver em iframe (para evitar duplicação)
        // Se estiver em iframe, o PageView já foi rastreado pelo parent
        var isInIframe = window.self !== window.top;
        if (!isInIframe) {
          fbq('track', 'PageView');
        } else {
          console.log('ℹ️ Detectado iframe - PageView já deve ter sido rastreado pelo parent');
        }
      })();
    </script>
    <!-- End Meta Pixel Code -->
  </head>
  <body>
    <!-- Meta Pixel Noscript Fallback -->
    <noscript><img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=25009624982012198&ev=PageView&noscript=1"
    /></noscript>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html> 